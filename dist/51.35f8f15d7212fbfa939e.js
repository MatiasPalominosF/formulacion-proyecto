(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"fk/G":function(t,e,o){"use strict";o.r(e),o.d(e,"ReportModule",function(){return P});var n=o("SVse"),r=o("mrSG"),a=o("s7LF"),c=o("N8BJ"),i=o("JX91"),b=o("lJxs"),d=o("8Y7J"),l=o("b3t4"),s=o("Iab2"),p=o("EUZL"),g=function(){function t(){}return t.prototype.exportAsExcelFile=function(t,e){var o=p.utils.json_to_sheet(t);console.log("worksheet",o);var n=p.write({Sheets:{data:o},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(n,e)},t.prototype.saveAsExcelFile=function(t,e){var o=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});s.saveAs(o,e+"_export_"+(new Date).getTime()+".xlsx")},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),u=o("/DnI"),m=o("FhuM"),h=o("G0yt"),f=o("Fdpk"),y=o("BCt1");function v(t,e){if(1&t&&(d.Xb(0,"th",26),d.Uc(1),d.Wb()),2&t){var o=e.$implicit;d.Db(1),d.Wc(" ",o," ")}}function k(t,e){if(1&t&&(d.Xb(0,"tr",27),d.Xb(1,"th",28),d.Uc(2),d.Wb(),d.Xb(3,"td"),d.Sb(4,"ngb-highlight",29),d.Wb(),d.Xb(5,"td"),d.Sb(6,"ngb-highlight",29),d.Wb(),d.Xb(7,"td"),d.Sb(8,"ngb-highlight",29),d.lc(9,"transform"),d.lc(10,"number"),d.Wb(),d.Xb(11,"td"),d.Sb(12,"ngb-highlight",29),d.lc(13,"date"),d.lc(14,"date"),d.Wb(),d.Wb()),2&t){var o=e.$implicit,n=e.index,r=d.kc(2);d.Db(2),d.Vc(n+1),d.Db(2),d.rc("result",o.name)("term",r.filter.value),d.Db(2),d.rc("result",o.quantity)("term",r.filter.value),d.Db(2),d.rc("result",d.mc(9,9,d.mc(10,11,o.totalPrice)))("term",r.filter.value),d.Db(4),d.rc("result",d.nc(13,13,o.date.toDate(),"dd/MM/yyyy HH:mm"))("term",d.nc(14,16,o.date.toDate(),"dd/MM/yyyy HH:mm"))}}function C(t,e){if(1&t){var o=d.Yb();d.Xb(0,"div",7),d.Xb(1,"m-card",8),d.hc("reloadFunction",function(t){return d.Ic(o),d.kc().reloadReportTable(t)}),d.Vb(2,9),d.Uc(3," Informe de ventas "),d.Ub(),d.Vb(4,10),d.Xb(5,"div",5),d.Xb(6,"div",11),d.Xb(7,"form"),d.Xb(8,"div",12),d.Uc(9," Buscar: "),d.Sb(10,"input",13),d.Wb(),d.Wb(),d.Wb(),d.Xb(11,"div",11),d.Xb(12,"div",12),d.Uc(13," Desde: "),d.Xb(14,"input",14),d.hc("ngModelChange",function(t){return d.Ic(o),d.kc().from=t}),d.Wb(),d.Wb(),d.Wb(),d.Xb(15,"div",11),d.Xb(16,"div",12),d.Uc(17," Hasta: "),d.Xb(18,"input",15),d.hc("ngModelChange",function(t){return d.Ic(o),d.kc().to=t}),d.Wb(),d.Wb(),d.Wb(),d.Xb(19,"div",11),d.Xb(20,"div",12),d.Xb(21,"button",16),d.hc("click",function(){return d.Ic(o),d.kc().exportAsXLSX()}),d.Sb(22,"i",17),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(23,"div",18),d.Xb(24,"table",19),d.Xb(25,"thead"),d.Xb(26,"tr"),d.Sc(27,v,2,1,"th",20),d.Wb(),d.Wb(),d.Xb(28,"tbody"),d.Sc(29,k,15,19,"tr",21),d.lc(30,"slice"),d.lc(31,"filterDate"),d.lc(32,"async"),d.Wb(),d.Wb(),d.Xb(33,"div",22),d.Xb(34,"ngb-pagination",23),d.hc("pageChange",function(t){return d.Ic(o),d.kc().page=t}),d.Wb(),d.Xb(35,"select",24),d.hc("ngModelChange",function(t){return d.Ic(o),d.kc().pageSize=t}),d.Xb(36,"option",25),d.Uc(37,"Mostrar todos los \xedtems"),d.Wb(),d.Xb(38,"option",25),d.Uc(39,"2 \xedtems por p\xe1gina"),d.Wb(),d.Xb(40,"option",25),d.Uc(41,"4 \xedtems por p\xe1gina"),d.Wb(),d.Xb(42,"option",25),d.Uc(43,"6 \xedtems por p\xe1gina"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Ub(),d.Wb(),d.Wb()}if(2&t){var n=d.kc();d.Db(1),d.rc("options",n.options),d.Db(9),d.rc("formControl",n.filter),d.Db(4),d.rc("ngModel",n.from),d.Db(4),d.rc("ngModel",n.to),d.Db(9),d.rc("ngForOf",n.headElements),d.Db(2),d.rc("ngForOf",d.oc(30,14,d.oc(31,18,d.mc(32,22,n.productSearch),n.from,n.to),(n.page-1)*n.pageSize,(n.page-1)*n.pageSize+n.pageSize)),d.Db(5),d.rc("collectionSize",n.collectionSize)("page",n.page)("pageSize",n.pageSize),d.Db(1),d.rc("ngModel",n.pageSize),d.Db(1),d.rc("ngValue",n.collectionSize),d.Db(2),d.rc("ngValue",2),d.Db(2),d.rc("ngValue",4),d.Db(2),d.rc("ngValue",6)}}var M=function(){function t(t,e,o){this.saleService=t,this.fbDate=e,this.excelService=o,this.page=1,this.pageSize=4,this.filter=new a.h(""),this.from=new Date("December 25, 1995 13:30:00"),this.to=new Date,this.disabled=!0,this.dataExports=[],this.dataExport={},this.options={close:!1,expand:!0,minimize:!0,reload:!0},this.headElements=["#","Producto","Cantidad","Precio total","Fecha"]}return t.prototype.ngOnInit=function(){this.breadcrumb={mainlabel:"Informes",links:[{name:"Home",isLink:!0,link:"/dashboard/ecommerce"},{name:"Informe de ventas",isLink:!1,link:""}]},this.fgDate=this.fbDate.group({from:[null,[a.G.required]],to:[null,[a.G.required]]}),this.getUserLogged(),this.getAllSales()},t.prototype.isWeekend=function(t){var e=new Date(t.year,t.month-1,t.day);return 0===e.getDay()||6===e.getDay()},t.prototype.isDisabled=function(t,e){return t.month!==e.month},t.prototype.getUserLogged=function(){localStorage.getItem("currentUser")&&(this.currentUser=JSON.parse(localStorage.getItem("currentUser")))},t.prototype.getAllSales=function(){var t=this;this.blockUIReportTable.start("Loading.."),this.saleService.getFullInfoSaleNotCancelled(this.currentUser.uid).subscribe(function(e){console.log(e),t.PRODUCT=e,t.collectionSize=t.PRODUCT.length,t.searchData(t.pipe),t.productSortable=t.PRODUCT,t.blockUIReportTable.stop()})},t.prototype.exportAsXLSX=function(){var t=this;null!=this.productSearch&&(this.PRODUCT.forEach(function(e){t.dataExport.nombre=e.name,t.dataExport.stock=e.stock,t.dataExport.cantidad_vendida=e.quantity,t.dataExport.fecha_venta=e.date.toDate(),t.dataExport.precio_total=e.totalPrice,console.log(t.dataExport),t.dataExports.push(t.dataExport),t.dataExport={}}),console.log("dataExports",this.dataExports),this.excelService.exportAsExcelFile(this.dataExports,"ventas"),this.dataExports=[])},t.prototype.searchData=function(t){var e=this;console.log("this.productSearch ",this.productSearch),this.productSearch=this.filter.valueChanges.pipe(Object(i.a)(""),Object(b.a)(function(o){return e.search(o,t)}))},t.prototype.search=function(t,e){return this.PRODUCT.filter(function(e){var o=t.toLowerCase();return e.name.toLowerCase().includes(o)})},t.prototype.reloadReportTable=function(){var t=this;this.blockUIReportTable.start("Loading.."),setTimeout(function(){t.blockUIReportTable.stop()},2500)},t.\u0275fac=function(e){return new(e||t)(d.Rb(l.a),d.Rb(a.g),d.Rb(g))},t.\u0275cmp=d.Lb({type:t,selectors:[["app-report-list"]],decls:8,vars:3,consts:[[1,"app-content","content"],[1,"content-wrapper"],[1,"content-header","row","mb-1"],[1,"col-12",3,"breadcrumb"],["id","horizontal-form-layouts"],[1,"row"],["class","col-md-12",4,"blockUI","blockUIMessage"],[1,"col-md-12"],[3,"options","reloadFunction"],["mCardHeaderTitle",""],["mCardBody",""],[1,"col-md-3"],[1,"form-group","form-inline"],["type","text",1,"form-control","ml-2",3,"formControl"],["type","date","placeholder","yyyy-mm-dd","name","from",3,"ngModel","ngModelChange"],["type","date","placeholder","yyyy-mm-dd","name","to",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-icon","btn-info","mr-1",3,"click"],[1,"icon-doc"],[1,"table-responsive","card-body"],[1,"table","table-striped"],["scope","col",4,"ngFor","ngForOf"],["mdbTableCol","",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["scope","col"],["mdbTableCol",""],["scope","row"],[3,"result","term"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"div",1),d.Xb(2,"div",2),d.Sb(3,"app-breadcrumb",3),d.Wb(),d.Wb(),d.Xb(4,"div",1),d.Xb(5,"section",4),d.Xb(6,"div",5),d.Sc(7,C,44,24,"div",6),d.Wb(),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Db(3),d.rc("breadcrumb",e.breadcrumb),d.Db(4),d.rc("blockUI","reportTable")("blockUIMessage","Loading"))},directives:[u.a,c.e,m.a,a.I,a.t,a.u,a.d,a.s,a.i,a.v,n.t,h.G,a.E,a.x,a.H,h.u],pipes:[n.F,f.a,n.b,y.a,n.g,n.f],styles:["[_nghost-%COMP%]     .btn-light:not(:disabled):not(.disabled):active{color:unset!important;background-color:unset!important;border-color:#d3d9df!important}[_nghost-%COMP%]     .btn-light:hover:not(.disabled):active{background-color:#e2e6ea!important;border-color:#dae0e5!important}[_nghost-%COMP%]     .btn-light{color:unset!important;background-color:unset!important;border-color:unset!important}[_nghost-%COMP%]     .bg-primary{background-color:#007bff!important}[_nghost-%COMP%]     .text-white{color:#fff!important}[_nghost-%COMP%]     .custom-day{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}[_nghost-%COMP%]     .custom-day:active{color:#6d7183!important;background-color:#fff!important;border-block-color:#0275d8!important}.bg-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important}[_nghost-%COMP%]     .hidden{display:block!important}.ngb-dp-weekday[_ngcontent-%COMP%]{color:#17a2b8}.ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{line-height:2rem;text-align:center;font-style:italic}.small[_ngcontent-%COMP%]{font-size:80%;font-weight:400}.ngb-dp-day[_ngcontent-%COMP%]{cursor:pointer!important}.ngb-dp-month[_ngcontent-%COMP%]{pointer-events:none}.btn-light[_ngcontent-%COMP%]:hover{color:#212529!important;background-color:#e2e6ea!important;border-color:#dae0e5!important}.ngb-datepicker-month-view[_ngcontent-%COMP%]{pointer-events:auto}.ngb-dp-header[_ngcontent-%COMP%]{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem}.ngb-dp-day[_ngcontent-%COMP%], .ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{width:2rem;height:2rem}.custom-day[_ngcontent-%COMP%]{height:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:rgba(2,117,216,.5)}[_nghost-%COMP%]     .block-ui-wrapper{background:rgba(255,249,249,.5)!important}.custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;border-radius:.25rem;display:inline-block;width:2rem}.custom-day.focused[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.weekend[_ngcontent-%COMP%]{background-color:#f0ad4e;border-radius:1rem;color:#fff}.hidden[_ngcontent-%COMP%]{display:none}"]}),Object(r.b)([Object(c.a)("reportTable"),Object(r.d)("design:type",Object)],t.prototype,"blockUIReportTable",void 0),t}(),O=o("iInd"),S=o("ErSb"),D=o("vj4e"),X=o("kaWu"),W=o("YDLe"),P=function(){function t(){}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},imports:[[n.c,S.a,D.a,h.z,h.K,a.n,a.C,W.a,c.d.forRoot({template:X.a}),O.l.forChild([{path:"report-list",component:M}])]]}),t}()}}]);